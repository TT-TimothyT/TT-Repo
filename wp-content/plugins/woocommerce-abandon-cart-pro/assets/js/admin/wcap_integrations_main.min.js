var Modal,connector_body="";function validateEmail(a){return/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(a)}function remove_nolinks(a,o){parseInt(a)>0&&jQuery("#wcap_active").removeClass("no_link"),parseInt(o)>0&&jQuery("#wcap_inactive").removeClass("no_link")}jQuery(function(a){(Modal={init:function(){a(document.body).on("click",".wcap-js-close-modal",this.close),a(document.body).on("click",".wcap-modal-overlay",this.close)},open:function(o,c){if(""!==c){var e=c.data("wcap-name"),s=c.data("wcap-title");e=e.replace("wcap_",""),s=void 0!==s?s.replace("wcap_",""):e,e=e.replace(e[0],e[0].toUpperCase()),a(document.body).addClass("wcap-modal-open").append('<div class="wcap-modal-overlay"></div>');var d='<div id="wcap_modal_1" class="wcap-modal '+o+'"><div class="wcap-modal__contents"> <div class="wcap-modal__header"><h1>Connect with '+s+'</h1></div><div class="wcap-modal__body">'+connector_body+' </div><div class = "wcap-modal-cart-content-hide" id ="wcap_remove_class">  </div> </div>  <div class="wcap-icon-close wcap-js-close-modal"></div>    </div>'}else{a(document.body).addClass("wcap-modal-open").append('<div class="wcap-modal-overlay"></div>');var d='<div class="wcap-modal '+o+'"><div class="wcap-modal__contents"> <div class="wcap-modal__body"></div><div class = "wcap-modal-cart-content-hide" id ="wcap_remove_class">  </div> </div>     </div>'}a(document.body).append(d),this.position()},loading:function(){a(document.body).addClass("wcap-modal-loading")},contents:function(o){a(document.body).removeClass("wcap-modal-loading"),o=o.replace(/\\(.)/mg,"$1"),a(".wcap-modal__body").html(o),this.position()},close:function(o,c){a(document.body).removeClass("wcap-modal-open wcap-modal-loading"),a(".wcap-modal, .wcap-modal-overlay").remove(),localStorage.removeItem("wcap_mc_stores"),localStorage.removeItem("wcap_mc_lists")},position:function(){a(".wcap-modal__body").removeProp("style");var o=a(".wcap-modal__header").outerHeight(),c=a(".wcap-modal").height(),e=a(".wcap-modal").width(),s=a(".wcap-modal__body").outerHeight();a(".wcap-modal").css({"margin-left":-e/2,"margin-top":-c/2}),c<s+o-5&&a(".wcap-modal__body").height(c-o)}}).init(),a(document).ready(function(){a(document).on("click",".wcap_integrators_view",function(){if(0==(count=parseInt(jQuery(this).attr("data-wcap-count"))))return!1;var o=this.id,c={action:"wcap_display_connectors",type:(o=o.split("_"))[1]};jQuery(".wcap_integrators_view").removeClass("current"),jQuery(this).addClass("current"),jQuery("#ac_events_loader").show(),a.post(wcap_int_params.ajax_url,c,function(o){a("#wcap_connectors_list").html(o),jQuery("#ac_events_loader").hide()}),setTimeout(()=>{jQuery("#ac_events_loader").hide()},5e3)}),a(document).on("click",".wcap_button_connect",function(){var o=a(this);Modal.open("type-ajax",o),Modal.loading();var c=o.data("wcap-name"),e={action:"wcap_display_connector_settings",name:c=c.replace("wcap_","")};a.post(wcap_int_params.ajax_url,e,function(a){Modal.contents(a)})}),a(document).on("click",".wcap_button_disconnect",function(){var o=a(this).data("wcap-name"),c={action:"wcap_disconnect_connector",name:o=o.replace("wcap_","")};Modal.open("type-ajax",""),Modal.loading(),a.post(wcap_int_params.ajax_url,c,function(c){a(document.body).removeClass("wcap-modal-loading");var e=a("#wcap_inactive").attr("data-wcap-count"),s=a("#wcap_active").attr("data-wcap-count");"success"===c.status?(a(document.body).addClass("wcap-modal-success"),a("#wcap_logout_url").length>0&&(window.location=a("#wcap_logout_url").val()),e++,s--,a("#wcap_active_count").text(s),a("#wcap_inactive_count").text(e),a("#wcap_active").attr("data-wcap-count",s),a("#wcap_inactive").attr("data-wcap-count",e),0==parseInt(s)&&a("#wcap_active").addClass("no_link"),0==parseInt(e)&&a("#wcap_inactive").addClass("no_link"),Modal.contents('<p class="wcap_msg">'+c.message+"</p>"),setTimeout(()=>{a(document.body).removeClass("wcap-modal-success"),a(document.body).removeClass("wcap-modal-open"),a(".wcap-modal, .wcap-modal-overlay").remove();var c="wcap_"+o+"_connect_div",e="wcap_"+o+"_connected_div";a("#"+c).css("display","block"),a("#"+e).css("display","none")},2e3)):(a(document.body).addClass("wcap-modal-failure"),Modal.contents('<p class="wcap_msg">'+c.message+"</p>"),setTimeout(()=>{a(document.body).removeClass("wcap-modal-failure"),a(document.body).removeClass("wcap-modal-open"),a(".wcap-modal, .wcap-modal-overlay").remove()},2e3))})}),a(document).on("click",".wcap_button_sync",function(){var o=a(this).data("wcap-name"),c={action:"wcap_sync_connector",name:o=o.replace("wcap_","")};Modal.open("type-ajax",""),Modal.loading(),a.post(wcap_int_params.ajax_url,c,function(o){a(document.body).removeClass("wcap-modal-loading"),"success"===o.status?(a(document.body).addClass("wcap-modal-success"),Modal.contents('<p class="wcap_msg">'+o.message+"</p>"),setTimeout(()=>{a(document.body).removeClass("wcap-modal-success"),a(document.body).removeClass("wcap-modal-open"),a(".wcap-modal, .wcap-modal-overlay").remove()},2e3)):(a(document.body).addClass("wcap-modal-failure"),Modal.contents('<p class="wcap_msg">'+o.message+"</p>"),setTimeout(()=>{a(document.body).removeClass("wcap-modal-failure"),a(document.body).removeClass("wcap-modal-open"),a(".wcap-modal, .wcap-modal-overlay").remove()},2e3))})})})});