jQuery(function(a){a(document).on("mouseout",function(a){if((null===a.toElement||null===a.relatedTarget)&&a.clientY<10){var e=Object.keys(localStorage);for(i=0;i<e.length;i++)if(e[i].includes("wc_cart_hash_")){var t=e[i];break}var o=localStorage.getItem(t);if(null===localStorage.getItem("wcap_ei_displayed")&&""!==o&&null!==o){c(),localStorage.setItem("wcap_ei_displayed","yes");var p=new Date;p.setHours(p.getHours()+24),localStorage.setItem("wcap_ei_popup_displayed_next_time",p.getTime())}}}),jQuery(document).ready(function(){var a=localStorage.getItem("wcap_ei_popup_displayed_next_time");null!=a&&new Date().getTime()>a&&(localStorage.removeItem("wcap_ei_popup_displayed_next_time"),localStorage.removeItem("wcap_ei_displayed"),localStorage.removeItem("wcap_ei_template_id")),jQuery(document).on("touchstart",function(){setTimeout(()=>{document.addEventListener("scroll",wcap_scrollSpeed)},1e4),wcap_scrollSpeed=()=>{var a=Object.keys(localStorage);for(i=0;i<a.length;i++)if(a[i].includes("wc_cart_hash_")){var e=a[i];break}var t=localStorage.getItem(e),o=localStorage.getItem("wcap_ei_displayed"),p=window.scrollY;setTimeout(()=>{newPosition=window.scrollY},100);var n=0;newPosition>0&&(n=newPosition-p),n>160&&null===o&&""!==t&&(c(),localStorage.setItem("wcap_ei_displayed","yes"),document.removeEventListener("scroll",wcap_scrollSpeed))}})});var e={wcap_heading_section_text_email:wcap_ei_modal_param.wcap_atc_head,wcap_image_path:wcap_ei_modal_param.wcap_image_path,wcap_image_file_name:wcap_ei_modal_param.wcap_image_file_name,wcap_image_file_name_ei:wcap_ei_modal_param.wcap_image_file_name_ei,wcap_text_section_text_field:wcap_ei_modal_param.wcap_atc_text,wcap_email_placeholder_section_input_text:wcap_ei_modal_param.wcap_atc_email_place,wcap_button_section_input_text:wcap_ei_modal_param.wcap_atc_button,wcap_button_bg_color:wcap_ei_modal_param.wcap_atc_button_bg_color,wcap_button_text_color:wcap_ei_modal_param.wcap_atc_button_text_color,wcap_popup_text_color:wcap_ei_modal_param.wcap_atc_popup_text_color,wcap_popup_heading_color:wcap_ei_modal_param.wcap_atc_popup_heading_color,wcap_non_mandatory_modal_input_text:wcap_ei_modal_param.wcap_atc_non_mandatory_input_text,wcap_atc_button:{backgroundColor:wcap_ei_modal_param.wcap_atc_button_bg_color,color:wcap_ei_modal_param.wcap_atc_button_text_color},wcap_atc_popup_text:{color:wcap_ei_modal_param.wcap_atc_popup_text_color},wcap_atc_popup_heading:{color:wcap_ei_modal_param.wcap_atc_popup_heading_color},wcap_quick_ck_heading:wcap_ei_modal_param.wcap_quick_ck_heading,wcap_quick_ck_heading_color:wcap_ei_modal_param.wcap_ei_heading_text_color,wcap_quick_ck_text:wcap_ei_modal_param.wcap_quick_ck_text,wcap_quick_ck_text_color:wcap_ei_modal_param.wcap_ei_text_color,wcap_quick_ck_button:wcap_ei_modal_param.wcap_ei_button_text,wcap_quick_ck_button_bg_color:wcap_ei_modal_param.wcap_ei_button_bg_color,wcap_quick_ck_button_text_color:wcap_ei_modal_param.wcap_ei_button_text_color,wcap_ei_button:{backgroundColor:wcap_ei_modal_param.wcap_ei_button_bg_color,color:wcap_ei_modal_param.wcap_ei_button_text_color},wcap_ei_popup_heading:{color:wcap_ei_modal_param.wcap_ei_heading_text_color},wcap_ei_popup_text:{color:wcap_ei_modal_param.wcap_ei_text_color}},t=function(){a(document).on("click","#wcap_ei_quick_ck_button",n).on("change","#wcap_ei_popup_input",o).on("click",".wcap_popup_non_mandatory_button",l).on("click","#wcap_ei_popup_close",u),a(document).on("keydown",function(a){27==a.keyCode&&d()})};function c(){var t,c,o,p,n=localStorage.getItem("wcap_hidden_email_id"),l="";if(jQuery("#billing_email").length>0&&""!==jQuery("#billing_email").val()&&(l=jQuery("#billing_email").val(),localStorage.setItem("wcap_hidden_email_id",l)),null===n&&""===l)var u=wcap_ei_modal_param.wcap_ei_modal_data;else var u=wcap_ei_modal_param.wcap_ei_modal_no_email_data;a(document.body).addClass("wcap-atc-modal-open").append('<div class="wcap-modal-overlay"></div>'),a(document.body).append('<div class="wcap-modal" style="overflow-y:auto; max-height:90%;"><div class="wcap-modal__contents"> '+u+" </div> </div>"),a(".wcap-modal__body").removeProp("style"),t=a(".wcap-modal__header").outerHeight(),c=a(".wcap-modal").height(),o=a(".wcap-modal").width(),p=a(".wcap-modal__body").outerHeight(),a(".wcap-modal").css({"margin-left":-o/2,"margin-top":-c/2}),c<p+t-5&&a(".wcap-modal__body").height(c-t);var d={template_id:wcap_ei_modal_param.wcap_ei_template_id,stats_action:"wcap_ei_opened",action:"wcap_ei_stats_update"};a.post(wcap_ei_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_ei_stats_update"),d,function(a,e,t){localStorage.setItem("wcap_ei_template_id",wcap_ei_modal_param.wcap_ei_template_id)}),new Vue({el:"#wcap_popup_main_div",data:e})}function o(){!function e(t){if(RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t)){if(wcap_ei_modal_param.wcap_debounce_key){var c,o={async:!0,crossDomain:!0,url:"https://api.debounce.io/v1/?api="+wcap_ei_modal_param.wcap_debounce_key+"&email="+t,method:"GET",headers:{}};a.ajax(o).done(function(e){"1"===e.success?"4"===e.debounce.code||"5"===e.debounce.code||"8"===e.debounce.code?p(t):(a("#wcap_placeholder_validated_msg").text(wcap_ei_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)):p(t)}).fail(function(a){p(t)})}else{c=t,jQuery.ajax({type:"POST",url:wcap_ei_modal_param.wc_ajax_url,data:{wcap_atc_email:c,action:"wcap_verify_email_validity"},dataType:"JSON"}).done(function(e){void 0!==e.status&&"success"!==e.status?(jQuery("#wcap_placeholder_validated_msg").text(e.msg),jQuery("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)):p(c)}).fail(function(a){p(c)})}}else a("#wcap_placeholder_validated_msg").text(wcap_ei_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)}(a("#wcap_ei_popup_input").val())}function p(e){var t=document.getElementById("wcap_ei_quick_ck_button");t.setAttribute("disabled","disabled"),t.classList.add("loading");var c={template_id:wcap_ei_modal_param.wcap_ei_template_id,stats_action:"wcap_email_capture",billing_email:e,ei_update:"yes",action:"wcap_ei_stats_update"};a.post(wcap_ei_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_ei_stats_update"),c,function(a,c,o){localStorage.setItem("wcap_hidden_email_id",e),"success"===c&&a&&(localStorage.setItem("wcap_abandoned_id",a),t.classList.remove("loading"),t.removeAttribute("disabled"))})}function n(e){e.preventDefault();var t={template_id:wcap_ei_modal_param.wcap_ei_template_id,stats_action:"wcap_ei_button_click",action:"wcap_ei_stats_update"};a.post(wcap_ei_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_ei_stats_update"),t,function(a,e,t){var c=wcap_ei_modal_param.wcap_ei_redirect_to_link;""!==c?window.location.href=c:d()})}function l(e){e.preventDefault();var t={template_id:wcap_ei_modal_param.wcap_ei_template_id,stats_action:"wcap_ei_no_thanks",action:"wcap_ei_stats_update"};a.post(wcap_ei_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_ei_stats_update"),t,function(a,e,t){d()})}function u(){var e={template_id:wcap_ei_modal_param.wcap_ei_template_id,stats_action:"wcap_ei_dismissed",action:"wcap_ei_stats_update"};a.post(wcap_ei_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_ei_stats_update"),e,function(a,e,t){d()})}function d(){a(document.body).removeClass("wcap-atc-modal-open wcap-modal-loading"),a(".wcap-modal, .wcap-modal-overlay").remove()}new t});