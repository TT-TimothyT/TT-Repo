var $thisbutton,$wcap_button,wcap_product_cart_link,wcap_add_to_cart_id,wcap_add_to_cart_pro_id,wcap_add_to_cart_variation_id,wcap_atc_modal_js_loaded="yes",wcap_clicked_dismissed=!1;jQuery(function(a){a(document).ready(function(){var a=localStorage.getItem("wcap_popup_displayed_next_time");null!=a&&new Date().getTime()>a&&(localStorage.removeItem("wcap_popup_displayed_next_time"),localStorage.removeItem("wcap_popup_displayed"))});var t="",e={wcap_heading_section_text_email:wcap_atc_modal_param.wcap_atc_head,wcap_image_path:wcap_atc_modal_param.wcap_image_path,wcap_image_file_name:wcap_atc_modal_param.wcap_image_file_name,wcap_text_section_text_field:wcap_atc_modal_param.wcap_atc_text,wcap_email_placeholder_section_input_text:wcap_atc_modal_param.wcap_atc_email_place,wcap_button_section_input_text:wcap_atc_modal_param.wcap_atc_button,wcap_button_bg_color:wcap_atc_modal_param.wcap_atc_button_bg_color,wcap_button_text_color:wcap_atc_modal_param.wcap_atc_button_text_color,wcap_popup_text_color:wcap_atc_modal_param.wcap_atc_popup_text_color,wcap_popup_heading_color:wcap_atc_modal_param.wcap_atc_popup_heading_color,wcap_non_mandatory_modal_input_text:wcap_atc_modal_param.wcap_atc_non_mandatory_input_text,wcap_phone_placeholder_section_input_text:wcap_atc_modal_param.wcap_atc_phone_place,wcap_atc_button:{backgroundColor:wcap_atc_modal_param.wcap_atc_button_bg_color,color:wcap_atc_modal_param.wcap_atc_button_text_color},wcap_atc_popup_text:{color:wcap_atc_modal_param.wcap_atc_popup_text_color},wcap_atc_popup_heading:{color:wcap_atc_modal_param.wcap_atc_popup_heading_color},wcap_atc_coupon_applied_msg:wcap_atc_modal_param.wcap_atc_coupon_applied_msg};a(document.body).on("wc_fragments_refreshed",function(t){var e=Object.keys(localStorage);for(i=0;i<e.length;i++)if(e[i].includes("wc_cart_hash_")){var c=e[i];break}if(""!==localStorage.getItem(c)){var p=localStorage.getItem("wcap_popup_displayed"),o=localStorage.getItem("wcap_abandoned_id");if("yes"!=p||null===o){localStorage.setItem("wcap_popup_displayed","yes");var d=new Date;d.setHours(d.getHours()+24),localStorage.setItem("wcap_popup_displayed_next_time",d.getTime());var n={wcap_atc_email:localStorage.getItem("wcap_hidden_email_id"),wcap_atc_user_action:localStorage.getItem("wcap_atc_user_action"),wcap_atc_template_id:wcap_atc_modal_param.wcap_atc_template_id,wcap_atc_phone:localStorage.getItem("wcap_atc_phone_number"),wcap_sms_consent:localStorage.getItem("wcap_sms_consent"),action:"wcap_atc_store_guest_email"};a.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_store_guest_email"),n,function(a,t,e){"success"===t&&a&&localStorage.setItem("wcap_abandoned_id",a)})}}});var c=function(){let t=a(".add_to_cart_button").length>0?".add_to_cart_button":".ajax_add_to_cart";a(document).on("click",t,this.wcap_on_shop_add_to_cart).on("click",".single_add_to_cart_button",this.wcap_on_shop_add_to_cart).on("added_to_cart",this.updateButton).on("added_to_cart",this.updateCartPage).on("added_to_cart",this.updateFragments).on("click",".wcap_popup_button",this.wcap_add_to_cart_from_shop).on("click",".wcap_popup_non_mandatory_button",this.wcap_add_product_to_cart).on("click",".wcap_popup_close",n),a(document).on("keydown",function(a){27==a.keyCode&&r()})};c.prototype.wcap_on_shop_add_to_cart=function(t){var c=this.getAttribute("class");if(wcap_hidden_email_id=localStorage.getItem("wcap_hidden_email_id"),wcap_clicked_dismissed&&-1==c.indexOf("ajax_add_to_cart")||-1==c.indexOf("ajax_add_to_cart")&&!(""==wcap_hidden_email_id||null==wcap_hidden_email_id))return!0;var p=parseInt(this.getAttribute("data-product_id")),o=wcap_atc_modal_param.enable_atc;if(o.length>0)var n=-1!=o.indexOf(p);else var n=!0;var r=wcap_atc_modal_param.disable_atc;if(r.length>0)var s=-1==r.indexOf(p);else var s=!0;if(-1==c.indexOf("product_type_variable")&&-1==c.indexOf("product_type_booking")&&-1==c.indexOf("product_type_bundle_input_required")&&n&&s){t.preventDefault(),$thisbutton=a(this),$wcap_button=a(this),wcap_product_cart_link=this.getAttribute("href");var u,l,w,m,$,h=localStorage.getItem("wcap_popup_displayed"),g=localStorage.getItem("wcap_atc_user_action");"yes"===localStorage.getItem("wcap_mailchimp_captured")?(a(".variations_form").length>0&&a(".variations_form").submit(),d()):("yes"!=h||null===g)&&""==wcap_atc_modal_param.wcap_populate_email?(a(document.body).addClass("wcap-atc-modal-open").append('<div class="wcap-modal-overlay"></div>'),a(document.body).append('<div class="wcap-modal" style="overflow-y:auto; max-height:90%;"><div class="wcap-modal__contents"> '+wcap_atc_modal_param.wcap_atc_modal_data+" </div> </div>"),a(".wcap-modal__body").removeProp("style"),u=a(".wcap-modal__header").outerHeight(),l=a(".wcap-modal").height(),w=a(".wcap-modal").width(),m=a(".wcap-modal__body").outerHeight(),a(".wcap-modal").css({"margin-left":-w/2,"margin-top":-l/2}),l<m+u-5&&a(".wcap-modal__body").height(l-u),a(document.body).trigger("wcap_after_atc_load"),$={template_id:wcap_atc_modal_param.wcap_atc_template_id,stats_action:"wcap_atc_opened",action:"wcap_atc_stats_record"},a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_stats_record"),$,function(a,t,e){localStorage.setItem("wcap_atc_template_id",wcap_atc_modal_param.wcap_atc_template_id)}),new Vue({el:"#wcap_popup_main_div",data:e}),a(".wcap_popup_button").prop("disabled",!0),a("#wcap_popup_input").on("input",function(t){var e=a("#wcap_popup_input").val(),c=a(".wcap_popup_button").is(":disabled");e.length>0&&!0==c?a(".wcap_popup_button").prop("disabled",!1):0==e.length&&!1==c&&a(".wcap_popup_button").prop("disabled",!0)})):(""!=wcap_atc_modal_param.wcap_populate_email&&(localStorage.setItem("wcap_hidden_email_id",wcap_atc_modal_param.wcap_populate_email),localStorage.setItem("wcap_atc_user_action","yes")),a("#wcap_atc_phone").length>0&&(localStorage.setItem("wcap_atc_phone_number",a("#wcap_atc_phone").val()),a("#wcap_sms_consent").length>0&&(wcap_sms_consent=document.getElementById("wcap_sms_consent").checked,localStorage.setItem("wcap_sms_consent",wcap_sms_consent))),a(".variations_form").length>0&&a(".variations_form").submit(),d())}};var p={};function o(){a("#wcap_coupon_auto_applied").length>0?(a("#wcap_coupon_auto_applied").text(wcap_atc_modal_param.wcap_atc_coupon_applied_msg),a("#wcap_coupon_auto_applied").fadeIn(),setTimeout(function(){a("#wcap_coupon_auto_applied").fadeOut(),t=a("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",t),localStorage.setItem("wcap_atc_user_action","yes"),a("#wcap_atc_phone").length>0&&(localStorage.setItem("wcap_atc_phone_number",a("#wcap_atc_phone").val()),a("#wcap_sms_consent").length>0&&(wcap_sms_consent=document.getElementById("wcap_sms_consent").checked,localStorage.setItem("wcap_sms_consent",wcap_sms_consent))),r(),a(".variations_form").length>0&&a(".variations_form").submit(),d()},$timer=parseInt(wcap_atc_modal_param.wcap_coupon_msg_fadeout_timer))):(t=a("#wcap_popup_input").val(),localStorage.setItem("wcap_hidden_email_id",t),localStorage.setItem("wcap_atc_user_action","yes"),a("#wcap_atc_phone").length>0&&(localStorage.setItem("wcap_atc_phone_number",a("#wcap_atc_phone").val()),a("#wcap_sms_consent").length>0&&(wcap_sms_consent=document.getElementById("wcap_sms_consent").checked,localStorage.setItem("wcap_sms_consent",wcap_sms_consent))),r(),a(".variations_form").length>0&&a(".variations_form").submit(),d())}function d(){var t=!1,e=$thisbutton.attr("data-product_id");if(void 0!==$thisbutton&&($thisbutton.is(".ajax_add_to_cart")||$thisbutton.is(".ajax"))){if(t=!0,!e){var c=$thisbutton.attr("href"),p="",o="";if(void 0!==c)p=c;else{if(!((c=$thisbutton.find("a")).length>0))return!0;p=a(c[0]).attr("href")}if(void 0===p||""===p)return!0;for(var d in o=(p=p.split("?"))[1].split("&"))if(-1!==o[d].indexOf("add-to-cart")){e=o[d].replace("add-to-cart=","");break}}$thisbutton.removeClass("added"),$thisbutton.addClass("loading");var n={};$thisbutton.attr("data-product_id")?a.each($thisbutton.data(),function(a,t){n[a]=t}):(n.product_id=e,n.quantity="1"),a("#wcap_checkbox_status").length>0&&a("#wcap_user_ref").length>0&&(n.wcap_checkbox_status=a("#wcap_checkbox_status").val(),n.wcap_user_ref=a("#wcap_user_ref").val()),a(document.body).trigger("adding_to_cart",[$thisbutton,n]),a.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),n,function(t){if(t){if(t.error&&t.product_url){window.location=t.product_url;return}if(r(),"yes"===wc_add_to_cart_params.cart_redirect_after_add){if(null===wc_add_to_cart_params.cart_url)var c="/cart";else var c=wc_add_to_cart_params.cart_url;window.location=c;return}if("yes"==wcap_atc_modal_param.wcap_ajax_add){a(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,$thisbutton]),$thisbutton.removeClass("loading"),$thisbutton.addClass("added"),localStorage.setItem("wcap_popup_displayed","yes");var p=new Date;p.setHours(p.getHours()+24),localStorage.setItem("wcap_popup_displayed_next_time",p.getTime())}if("no"==wcap_atc_modal_param.wcap_ajax_add){"yes"!=localStorage.getItem("wcap_popup_displayed")&&localStorage.setItem("wcap_popup_displayed","no"),window.location=window.location.pathname+"?add-to-cart="+$thisbutton.attr(e);return}"checked"===localStorage.getItem("wcap_checkbox_status")&&(console.log("Here"),console.log(localStorage),FB.AppEvents.logEvent("MessengerCheckboxUserConfirmation",null,{app_id:wcap_fb_params.aid,page_id:wcap_fb_params.pid,ref:"",user_ref:localStorage.getItem("wcap_user_ref")})),$thisbutton.is(".single_add_to_cart_button")&&(localStorage.setItem("wcap_popup_displayed","no"),a(document.body).trigger("wc_fragments_refreshed"))}})}t||$thisbutton.click()}function n(){var t={template_id:wcap_atc_modal_param.wcap_atc_template_id,stats_action:"wcap_atc_dismissed",action:"wcap_atc_stats_record"};r(),wcap_clicked_dismissed=!0,a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_stats_record"),t,function(a,t,e){"on"===wcap_atc_modal_param.wcap_close_icon_add_to_cart?d():r()})}function r(){a(document.body).removeClass("wcap-atc-modal-open wcap-modal-loading"),a(".wcap-modal, .wcap-modal-overlay").remove()}c.prototype.wcap_add_to_cart_from_shop=function(t){t.preventDefault();var e=a("#wcap_popup_input").val(),c=a("#wcap_atc_phone").val();if(jQuery("input, select, textarea",jQuery("#wcap_modal_form")).each(function(a){var t=jQuery(this);"wcap_email"==t.attr("name")||"wcap_atc_phone"==t.attr("name")||(p[t.attr("name")]=t.val())}),RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)){if("on"===wcap_atc_modal_param.wcap_switch_atc_phone_mandatory&&(""===c||void 0===c||c.length<7))a("#wcap_placeholder_validated_msg").text(wcap_atc_modal_param.wcap_phone_mandatory_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3);else if(wcap_atc_modal_param.wcap_debounce_key){var d,n={async:!0,crossDomain:!0,url:"https://api.debounce.io/v1/?api="+wcap_atc_modal_param.wcap_debounce_key+"&email="+e,method:"GET",headers:{}};a.ajax(n).done(function(t){"1"===t.success?"4"===t.debounce.code||"5"===t.debounce.code||"8"===t.debounce.code?o():(a("#wcap_placeholder_validated_msg").text(wcap_atc_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)):o()}).fail(function(a){o()})}else{d=e,jQuery.ajax({type:"POST",url:wcap_atc_modal_param.wc_ajax_url,data:{wcap_atc_email:d,action:"wcap_verify_email_validity"},dataType:"JSON"}).done(function(t){void 0!==t.status&&"success"!==t.status?(jQuery("#wcap_placeholder_validated_msg").text(t.msg),jQuery("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)):o()}).fail(function(a){o()})}}else a("#wcap_placeholder_validated_msg").text(wcap_atc_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)},c.prototype.updateButton=function(t,e,c,o){if(o=void 0!==o&&o){if(o.removeClass("loading"),o.addClass("added"),!wc_add_to_cart_params.is_cart&&0===o.parent().find(".added_to_cart").length){o.after(' <a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>");var d=localStorage.getItem("wcap_popup_displayed"),n=localStorage.getItem("wcap_abandoned_id");if("yes"!=d||null===n){localStorage.setItem("wcap_popup_displayed","yes");var r=new Date;r.setHours(r.getHours()+24),localStorage.setItem("wcap_popup_displayed_next_time",r.getTime());var s=null!==localStorage.getItem("wcap_captured_from")?localStorage.getItem("wcap_captured_from"):"atc",u={wcap_atc_email:localStorage.getItem("wcap_hidden_email_id"),wcap_atc_user_action:localStorage.getItem("wcap_atc_user_action"),wcap_atc_template_id:wcap_atc_modal_param.wcap_atc_template_id,wcap_atc_phone:localStorage.getItem("wcap_atc_phone_number"),wcap_sms_consent:localStorage.getItem("wcap_sms_consent"),wcap_captured_from:s,action:"wcap_atc_store_guest_email"};u={...u,...p},a.post(wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_store_guest_email"),u,function(a,t,e){"success"===t&&a&&localStorage.setItem("wcap_abandoned_id",a)})}}a(document.body).trigger("wc_cart_button_updated",[o])}},c.prototype.updateCartPage=function(){var t=window.location.toString().replace("add-to-cart","added-to-cart");a(".shop_table.cart").load(t+" .shop_table.cart:eq(0) > *",function(){a(".shop_table.cart").stop(!0).css("opacity","1").unblock(),a(document.body).trigger("cart_page_refreshed")}),a(".cart_totals").load(t+" .cart_totals:eq(0) > *",function(){a(".cart_totals").stop(!0).css("opacity","1").unblock(),a(document.body).trigger("cart_totals_refreshed")})},c.prototype.updateFragments=function(t,e){e&&(a.each(e,function(t){a(t).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}})}),a.each(e,function(t,e){a(t).replaceWith(e),a(t).stop(!0).css("opacity","1").unblock()}),a(document.body).trigger("wc_fragments_loaded"))},c.prototype.wcap_add_product_to_cart=function(t){t.preventDefault();var e={template_id:wcap_atc_modal_param.wcap_atc_template_id,stats_action:"wcap_atc_no_thanks",action:"wcap_atc_stats_record"};r(),a.post(wcap_atc_modal_param.wc_ajax_url.toString().replace("%%endpoint%%","wcap_atc_stats_record"),e,function(t,e,c){if("off"===wcap_atc_modal_param.wcap_atc_mandatory_email||""===wcap_atc_modal_param.wcap_atc_mandatory_email)localStorage.setItem("wcap_atc_user_action","no"),d();else{var p=a("#wcap_popup_input").val(),o=wcap_atc_modal_param.wcap_mandatory_text;p&&(o=wcap_atc_modal_param.wcap_mandatory_email_text),a("#wcap_placeholder_validated_msg").text(o),a("#wcap_placeholder_validated_msg").fadeIn(),setTimeout(function(){a("#wcap_placeholder_validated_msg").fadeOut()},3e3)}})},new c});